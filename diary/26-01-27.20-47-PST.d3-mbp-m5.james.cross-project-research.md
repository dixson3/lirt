# Cross-Project Research Extraction Pattern for Gas Town Rigs

**Date**: 2026-01-27 20:47 PST
**Town**: gt
**Type**: pattern
**Bead**: lirt-u9m

---

## The Pattern

Research conducted in one Gas Town rig can be extracted and used in another rig through agent instructions that reference absolute paths to research artifacts in other projects. This enables knowledge transfer across the Gas Town ecosystem without duplication.

**Discovery**: Agent instructions at `.claude/agents/<name>.md` can include cross-project references, establishing research as a shared resource across rigs.

## What Happened

User requested: "extract the research in the clio project for the linear cli and use the lirt spec writer agent in lirt to create a specification in lirt"

This triggered the first explicit cross-project research transfer between Gas Town rigs.

## The Process

1. **Located research in clio**: `/Users/james/gt/clio/refinery/rig/research/cl-k0a1/lirt-spec.md` (802 lines)
2. **Found diary entry**: `26-01-27.07-37-PST.Gastown.lirt-cli-research-and-spec.md` documenting the research insights
3. **Attempted agent invocation**: Tried `Task` tool with `subagent_type: lirt-spec-writer` (failed)
4. **Discovered limitation**: Custom agents in `.claude/agents/` are role definitions for reference, not invocable via Task tool
5. **Followed agent instructions directly**: Read lirt-spec-writer instructions which pointed to clio research location
6. **Created specifications**: Generated 4 comprehensive docs (2,631 lines total) in lirt's `docs/` directory

## Key Discovery: Agent Instructions as Cross-Project Bridges

The lirt-spec-writer agent definition at `.claude/agents/lirt-spec-writer.md` includes:

```markdown
## When Invoked

1. Review existing specs in `/Users/james/gt/clio/mayor/rig/research/cl-k0a1/`
```

This establishes a **cross-project reference pattern**: agents in one rig can have instructions pointing to research artifacts in other rigs via absolute paths. Research becomes a shared resource across the town.

## Research Content Transferred

From clio to lirt (802 lines → 2,631 lines expanded):

**Technical Details**:
- Linear GraphQL API architecture (single global endpoint, no per-workspace URLs)
- AWS CLI-style multi-profile credential management
- 12 command groups following `gh` CLI semantics
- Caching strategy (5m TTL for enumeration data: teams, states, labels, users, priorities)
- Testing approach (no sandbox API, requires pre-provisioned free Linear workspace)
- Performance targets (< 50ms startup, < 50MB memory for bash scripting)

**Technology Stack**:
- Go 1.21+ with Cobra, Viper, go-graphql-client
- Security considerations (0600 file permissions, masked API keys)

**Documentation Created in lirt**:
- `docs/SPECIFICATION.md` — Technical spec (architecture, commands, caching, testing)
- `docs/REQUIREMENTS.md` — Functional and non-functional requirements
- `docs/AUTHENTICATION.md` — Auth setup, multi-profile management, security
- `docs/CONFIGURATION.md` — Config file reference, examples, troubleshooting

## Alternatives Considered

**1. Copy research files directly to lirt**
❌ Rejected: Loses source context, creates duplication, unclear which copy is authoritative

**2. Create symlinks between projects**
❌ Rejected: Breaks when projects move, doesn't work across filesystems or in certain CI environments

**3. Use git submodules**
❌ Rejected: Too heavyweight for simple research references, complicates repo management

**4. Agent instructions with absolute paths + diary cross-references** ✅
Chosen: Clear knowledge lineage, no duplication, source attribution, research stays in original context

## Pattern Structure

The established pattern:

1. **Research storage**: `/research/<bead-id>/` directories in the originating rig
2. **Agent instructions**: Reference research from other rigs via absolute paths
3. **Diary entries**: Capture research insights for human review
4. **Specifications**: Created in target rig's `docs/` directory
5. **Source attribution**: Documentation footer cites research origin

**Directory Layout**:
```
/Users/james/gt/
├── clio/
│   └── refinery/rig/
│       ├── research/cl-k0a1/
│       │   └── lirt-spec.md          # Research artifact
│       └── diary/
│           └── 26-01-27.*.md         # Research insights
└── lirt/
    └── refinery/rig/
        ├── .claude/agents/
        │   └── lirt-spec-writer.md   # References clio research
        └── docs/
            ├── SPECIFICATION.md      # Created from research
            ├── REQUIREMENTS.md
            ├── AUTHENTICATION.md
            └── CONFIGURATION.md
```

## Trade-offs

**Gained**:
- ✅ Clear knowledge lineage (source → target traceability)
- ✅ No duplication (research remains in original location)
- ✅ Source attribution (docs cite research origin)
- ✅ Research stays in original context (easier to understand rationale)

**Lost**:
- ❌ Breaks if source project moves (absolute paths are brittle)
- ❌ Requires access to source project (not portable)

## Implications for Gas Town

**Immediate**:
- All Gas Town rigs can reference research from other rigs
- Research becomes a **shared resource** across the town
- Agent instructions document dependencies on other rigs
- Diary entries should reference research artifacts

**Future Considerations**:
- Consider **town-level `/research/` directory** for cross-cutting research
- Pattern should be documented in `mayor/docs/CROSS-PROJECT-RESEARCH.md`
- May need research versioning strategy if research evolves
- Consider relative paths with town root (`$GT_ROOT/clio/...`) for portability

**Applies Beyond Linear CLI**:
- Any research done in one rig (API investigation, library evaluation, architecture exploration) can be referenced by agents in other rigs
- Reduces redundant research effort across the town
- Establishes research as a first-class artifact in Gas Town

## Implementation

**Commit**: 770b0c4 — Add comprehensive lirt specification documentation

**Files**:
- Research source: `/Users/james/gt/clio/refinery/rig/research/cl-k0a1/lirt-spec.md`
- Agent reference: `/Users/james/gt/lirt/refinery/rig/.claude/agents/lirt-spec-writer.md:20`
- Specs created: `/Users/james/gt/lirt/refinery/rig/docs/*.md`

**Source Attribution** (in all spec files):
```markdown
---
**Source**: Based on research conducted in the clio project (cl-k0a1) on 2026-01-27.
```

## Related Work

- **lirt-2wu**: Documentation pattern for dual-audience Gas Town projects
- **clio diary**: 26-01-27.07-37-PST.Gastown.lirt-cli-research-and-spec.md
- **Town-level docs**: [mayor/docs/BEADS-MEDIATED-COORDINATION.md](../../../../mayor/docs/BEADS-MEDIATED-COORDINATION.md) — Similar pattern documentation

This establishes Gas Town as an ecosystem where research flows between rigs, not just isolated project work.

---

**Chronicle bead**: lirt-u9m
**Labels**: documentation, knowledge-transfer, pattern
